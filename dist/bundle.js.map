{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Polarbear.ts","src/attributes/Bindval.ts","src/attributes/Events.ts","src/attributes/Loopfor.ts","src/data/DataFns.ts","src/data/Observe.ts","src/dom/Traverse.ts","src/etc/ElementEvents.ts","src/etc/KeyCodes.ts","src/etc/Regexes.ts","src/parser/CodeParser.ts","src/vdom/CreateElement.ts","src/vdom/Diff.ts","src/vdom/Hydrate.ts","src/vdom/Render.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Traverse_1","Observe_1","ElementEvents_1","Render_1","Diff_1","Hydrate_1","Polarbear","prototype","render","r1","performance","now","this","$initial","$currentVDom","default","$masterVDom","console","log","$appEl","$node","$target","replaceWith","mount","renderElem","$appContainerEl","temp","patch","r2","toFixed","params","$refs","$filters","$data","$watchers","created","$appContainerSel","el","document","querySelector","data","methods","method","hasOwnProperty","events","event_1","possibleEventList","includes","addEventListener","filters","filter","watch","prop","mounted","window","DataFns_1","instance","modifiers","eventName","returnAsNumber","trimReturnValue","fn","elementValue","target","value","isNaN","parseFloat","trim","setProp","KeyCodes_1","CodeParser_1","event","callbackFn","eventComponents","split","eventModifiers","splice","commonKeyCodeNames","Object","keys","keyCodes","otherEventModifiers","capture","passive","prevent","once","conditionalChecks","forEach","em","push","parsedModifier","Number","conditionalRule","join","finalCode","parse","Function","statement","loopComponents","specifics","iterable","getProp","keyName","valName","idxName","count","type","substr","Array","isArray","toString","entries","parseInt","obj","val","x","l","indexOf","key","def","undefined","observe","parent","propPath_1","propertyVal","valueType","constructor","arrProxy","Proxy","deleteProperty","property","String","set","definitionLocation","defineProperty","get","v","oldVal","apply","Regexes_1","CreateElement_1","traverse","node","attrs","conditionalCase","loopCase","boundData","refName","children","from","childNodes","nodeType","attributes","_a","name_1","name","startsWith","slice","opts","replace","Regexes","interpolationContent","s","previousElementSibling","tagName","backspace","delete","down","enter","left","right","space","tab","up","esc","interpolation","globalInterpolation","innerInterpolation","innerFunctionInterpolation","filterMatch","filter2Match","filterNames","func","functionName","_b","_c","_d","_e","_f","_g","_h","diffChildren","oldVChildren","newVChildren","childPatches","oldVChild","diff","additionalPatches","additionalVChild","appendChild","_i","$parent","xs","ys","zipped","Math","max","zip","child","additionalPatches_1","vOldNode","vNewNode","remove","$newNode","$newNode_1","parentNode","patchAttrs","oldAttrs","newAttrs","patches","k","setAttribute","removeAttribute","patches_1","diffAttrs","patchChildren","Loopfor_1","hydrate","extraData","nodeCopy","JSON","stringify","newRootChildren","map","tagName_1","attrs_1","events_1","conditionalCase_1","boundData_1","refName_1","children_1","keyName_1","valName_1","idxName_1","iterable_1","type_1","newChildren","j","parsed","computeContent","content","interpolationMatches","match","cur","Events_1","Bindval_1","conditionalEval","Boolean","createComment","$el","createElement","_j","_k","_l","$child","HTMLInputElement","_m","vNode","createTextNode"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,iECAA,IAAAK,EAAAX,EAAA,kBACAY,EAAAZ,EAAA,kBACAa,EAAAb,EAAA,uBACAc,EAAAd,EAAA,iBACAe,EAAAf,EAAA,eACAgB,EAAAhB,EAAA,kBAeAiB,GAmGEA,EAAAC,UAAAC,OAAA,WACE,IAAMC,EAAKC,YAAYC,MACvB,GAAIC,KAAKC,SACPD,KAAKE,aAAeT,EAAAU,QAAQH,KAAMA,KAAKI,aAEvCC,QAAQC,IAAIN,KAAKE,cAEjBF,KAAKO,OAoBX,SAAeC,EAAoBC,GAEjC,OADAA,EAAQC,YAAYF,GACbA,EAtBWG,CAAMpB,EAAAqB,WAAWZ,KAAMA,KAAKE,cAAeF,KAAKa,iBAE9Db,KAAKC,UAAW,MACX,CACL,IAAMa,EAAOrB,EAAAU,QAAQH,KAAMA,KAAKI,aAEhCC,QAAQC,IAAIQ,GAEZ,IAAMC,EAAQvB,EAAAW,QAAKH,KAAMA,KAAKE,aAAcY,GAE5Cd,KAAKO,OAASQ,EAAMf,KAAKO,QAEzBP,KAAKE,aAAeY,EAGtB,IAAME,EAAKlB,YAAYC,MACvBM,QAAQC,IAAI,gBAAgBU,EAAKnB,GAAIoB,QAAQ,GAAE,OAEnDvB,GA7FE,SAAAA,EAAYwB,GAmBV,GAtCFlB,KAAAmB,MAAoC,GAGpCnB,KAAAoB,SAAqB,GAGrBpB,KAAAqB,MAAgC,GAGhCrB,KAAAsB,UAAyC,GAMzCtB,KAAAC,UAAoB,EAOdiB,EAAOK,SAASL,EAAOK,UAG3BvB,KAAKwB,iBAAmBN,EAAOO,GAG/BzB,KAAKa,gBAAkBa,SAASC,cAAc3B,KAAKwB,kBAGnDxB,KAAKI,YAAchB,EAAAe,QAASH,KAAKa,iBACjCb,KAAKE,aAAe,GAGpBb,EAAAc,QAAQH,KAAMkB,EAAOU,MAGjBV,EAAOW,QACT,IAAK,IAAMC,KAAUZ,EAAOW,QACtBX,EAAOW,QAAQE,eAAeD,KAEhC9B,KAAK8B,GAAUZ,EAAOW,QAAQC,IAMpC,GAAIZ,EAAOc,OAAQ,gBACNC,GACLf,EAAOc,OAAOD,eAAeE,IAAU3C,EAAA4C,kBAAkBC,SAASF,IAGpEP,SAASU,iBAAiBH,EAAO,SAAC/D,GAAa,OAAAgD,EAAOc,OAAOC,GAAO/D,MAJxE,IAAK,IAAM+D,KAASf,EAAOc,SAAhBC,GAUb,GAAIf,EAAOmB,QACT,IAAK,IAAMC,KAAUpB,EAAOmB,QACtBnB,EAAOmB,QAAQN,eAAeO,KAEhCtC,KAAKoB,SAASkB,GAAUpB,EAAOmB,QAAQC,IAU7C,GAHAtC,KAAKJ,SAGDsB,EAAOqB,MACT,IAAK,IAAMC,KAAQtB,EAAOqB,MACpBrB,EAAOqB,MAAMR,eAAeS,KAE9BxC,KAAKsB,UAAUkB,GAAQtB,EAAOqB,MAAMC,IAOtCtB,EAAOuB,SAASvB,EAAOuB,QAAQzD,KAAKgB,kBAmC3C0C,OAAehD,UAAYA,6MCtJ5B,IAAAiD,EAAAlE,EAAA,mBAEAM,EAAAoB,QAAA,SAAuCyC,EAAqBJ,EAAcK,GAExE,IAAIC,EAAoB,QACpBD,EAAUV,SAAS,UAASW,EAAY,UAG5C,IAAIC,GAA0B,EAC1BF,EAAUV,SAAS,YAAWY,GAAiB,GAGnD,IAAIC,GAA2B,EAI/B,OAHIH,EAAUV,SAAS,UAASa,GAAkB,GAG3C,CACLF,UAASA,EACTG,GAAI,SAAC/E,GAEH,IAAIgF,EAAqBhF,EAAEiF,OAA4BC,MAGvDF,EAAeH,EAAiBM,MAAMC,WAAWJ,IAAiBA,EAAeI,WAAWJ,GAAgBA,EAG5GA,EAAeF,EAAkBE,EAAaK,OAASL,EAGvDP,EAAAa,QAAQZ,EAAUJ,EAAMU,+GC7B9B,IAAAO,EAAAhF,EAAA,mBACAa,EAAAb,EAAA,wBACAiF,EAAAjF,EAAA,wBAEAM,EAAAoB,QAAA,SAAqCyC,EAAqBe,EAAeC,GAEvE,IAAMC,EAA4BF,EAAMG,MAAM,KAExChB,EAAoBe,EAAgB,GACpCE,EAA2BF,EAAgBG,OAAO,GAGxD,GAAK1E,EAAA4C,kBAAkBC,SAASW,GAAhC,CAMA,IAAMmB,EAA+BC,OAAOC,KAAKV,EAAAW,UAG3CC,EAAkD,CACtDC,SAAW,EACXC,SAAW,EACXC,SAAW,EACXC,MAAQ,GAINC,EAAyC,GAG7CX,EAAeY,QAAQ,SAACC,GACtB,GAAIV,OAAOC,KAAKE,GACLlC,SAASyC,GAElBP,EAAoBO,IAAM,OACrB,GAAIX,EAAmB9B,SAASyC,GAErCF,EAAkBG,KAAK,sBAAsBpB,EAAAW,SAASQ,QACjD,CAEL,IAAME,EAAyBC,OAAOH,GACjCvB,MAAMyB,GAKTJ,EAAkBG,KAAK,mBAAmBD,EAAE,KAH5CF,EAAkBG,KAAK,sBAAsBC,MASnD,IAAME,EAA0B,SAASN,EAAkBO,KAAK,MAAK,iBAG/DC,EAAoBxB,EAAAyB,MAAMvC,EAAUgB,GAG1C,MAAO,CACLd,UAASA,EACTG,GAAI,SAAC/E,GAEH,OAAOkH,SAAS,qEAGdf,EAA6B,QAAI,2BAA6B,IAAE,YACrC,EAA3BK,EAAkBzF,OAAa+F,EAAkB,IAAE,WACnDE,EAAS,YAERlG,KAAK4D,EAAU1E,IAEpBmG,oBAAmBA,iKCzEvB,IAAA1B,EAAAlE,EAAA,mBAEAM,EAAAoB,QAAA,SAAoCyC,EAAqByC,GACvD,IAAMC,EAA2BD,EAAUvB,MAAM,UAEjD,GAA4B,EAAxBwB,EAAerG,OAAY,CAC7B,IAAMsG,EAAYD,EAAe,GAAG/B,OACAO,MAAM,KACtC0B,EAAW7C,EAAA8C,QAAQ7C,EAASvB,MAAOiE,EAAe,GAAG/B,QAErDmC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,OAAK,EAAEC,OAAI,EAoC1C,OAlCAzF,QAAQC,IAAIiF,GAEa,IAArBA,EAAUtG,OACZyG,EAAUH,EAAU,GAAGhC,OACO,IAArBgC,EAAUtG,QACnByG,EAAUH,EAAU,GAAGQ,OAAO,GACPxC,OACvBqC,EAAUL,EAAU,GAAGQ,OAAO,EAAGR,EAAU,GAAGtG,OAAS,GAChCsE,QACO,IAArBgC,EAAUtG,SACnByG,EAAUH,EAAU,GAAGQ,OAAO,GACPxC,OACvBoC,EAAUJ,EAAU,GAAGhC,OACvBqC,EAAUL,EAAU,GAAGQ,OAAO,EAAGR,EAAU,GAAGtG,OAAS,GAChCsE,QAUvBsC,EAFEG,MAAMC,QAAQT,IAChBM,EAAO,QACCN,EAASvG,QACkB,oBAA1B,EAAWiH,YACpBJ,EAAO,SACPN,EAAWtB,OAAOiC,QAAQX,GAClBtB,OAAOC,KAAKqB,GAAUvG,SAE9B6G,EAAO,SACCM,SAASZ,IAGZ,CACLE,QAAOA,EACPC,QAAOA,EACPC,QAAOA,EACPJ,SAAQA,EACRK,MAAKA,EACLC,KAAIA,8GClDG/G,EAAAyE,QAAU,SAAC6C,EAAoBlC,EAA2BmC,GACpEnC,EAAgBL,QAAUK,EAAQA,EAAgBL,MAAM,MAEzD,IADA,IAAqCyC,EAAjCjI,EAAI,EAAGkI,EAAIrC,EAAKlF,OAAQb,EAAIiI,EACzB/H,EAAIkI,IAAKlI,EACdiI,EAAInI,EAAE+F,EAAK7F,IACXF,EAAIA,EAAE+F,EAAK7F,IAAOA,IAAMkI,EAAI,EAAIF,EAAY,MAALC,EAAYA,IAAQpC,EAAK7F,EAAI,GAAGmI,QAAQ,OAA0B,GAAftC,EAAK7F,EAAI,GAAiB,GAAL,IAKtGS,EAAA0G,QAAU,SAACY,EAAoBK,EAA0BC,EAAW7H,GAG/E,IAFAA,EAAI,EACJ4H,EAAOA,EAAe5C,MAAS4C,EAAe5C,MAAM,KAAO4C,EACpDL,GAAOvH,EAAI4H,EAAIzH,QAAQoH,EAAMA,EAAIK,EAAI5H,MAC5C,YAAgB8H,IAARP,GAAqBvH,EAAI4H,EAAIzH,OAAU0H,EAAMN,yFChBvD,IAAA1D,EAAAlE,EAAA,aAEAM,EAAAoB,QAAA,SAAwB0G,EAAQjE,EAAqByD,EAA6BS,cACrEtE,GACT,GAAI6D,EAAItE,eAAeS,GAAO,CAE5B,IAAMuE,EAAWD,EAAYA,EAAM,IAAItE,EAASA,EAG1CwE,EAAcrE,EAAA8C,QAAQY,EAAK7D,GAG3ByE,EAAYD,EAAYE,YAE9B,GAAID,IAAc/C,OAEhBvB,EAAAa,QAAQZ,EAASvB,MAAO0F,EAAU,IAClCpE,EAAAa,QAAQZ,EAAUmE,EAAU,IAG5BF,EAAQjE,EAAUoE,EAAaD,QAC1B,GAAIE,IAAcjB,MAAO,CAE9BrD,EAAAa,QAAQZ,EAASvB,MAAO0F,EAAUC,GAIlC,IAAMG,EAAW,IAAIC,MAAMzE,EAAA8C,QAAQ7C,EAASvB,MAAO0F,GAAW,CAE5DM,eAAA,SAAelE,EAAamE,GAE1B,OADAjH,QAAQC,IAAI,YAAYiH,OAAOD,GAAS,SAASnE,IAC1C,GAGTqE,IAAA,SAAIrE,EAAamE,EAAelE,GAG9B,OAFAD,EAAOmE,GAAYlE,EACnB/C,QAAQC,IAAO6C,EAAM,IAAIC,EAAK,IAAImE,OAAOD,KAClC,KAKX3E,EAAAa,QAAQZ,EAAUmE,EAAUI,OACvB,CAELxE,EAAAa,QAAQZ,EAASvB,MAAO0F,EAAUC,GAGlC,IAAMS,EAAqBX,EAASnE,EAAA8C,QAAQ7C,EAAUkE,GAAUlE,EAGhEsB,OAAOwD,eAAeD,EAAoBjF,EAAM,CAC9CmF,IAAA,WAEE,OAAOhF,EAAA8C,QAAQ7C,EAASvB,MAAO0F,IAEjCS,IAAA,SAAII,GAEF,IAAMC,EAASlF,EAAA8C,QAAQ7C,EAASvB,MAAO0F,GAEvCpE,EAAAa,QAAQZ,EAASvB,MAAO0F,EAAUa,GAE9BhF,EAAStB,UAAUyF,IAErBnE,EAAStB,UAAUyF,GAAUe,MAAMlF,EAAU,CAACiF,EAAQD,IAMxDhF,EAAShD,cAnEnB,IAAK,IAAM4C,KAAQ6D,IAAR7D,uGCJb,IAAAuF,EAAAtJ,EAAA,kBACAuJ,EAAAvJ,EAAA,yBAGAM,EAAAoB,QAAA,SAAwB8H,EAASC,GAC/B,IAAIC,EAAgB,GAChBnG,EAAiB,GACjBoG,EAA0B,GAC1BC,EAAmB,GACnBC,EAAoC,GACpCC,EAAkB,GAClBC,EAAoB,GAExBxC,MAAMyC,KAAKP,EAAKQ,YACV/D,QAAQ,SAACzG,GACW,IAAfA,EAAEyK,SACJH,EAAS3D,KAAMoD,EAAS/J,IAExBsK,EAAS3D,KAAM3G,EAAU0D,QAIlC,IAAK,IAAItD,EAAI,EAAGA,EAAI4J,EAAKU,WAAW3J,OAAQX,IAAK,CACzC,IAAAuK,EAAAX,EAAAU,WAAAtK,GAACwK,EAAAD,EAAAE,KAAM3F,EAAAyF,EAAAzF,MAET0F,EAAKE,WAAW,KAGlBhH,EADW8G,EAAKG,MAAM,IACT7F,EACJ0F,EAAKE,WAAW,WAGzBV,EAAY,CACV9F,KAAMY,EACN8F,KAHYJ,EAAKhF,MAAM,KAGXmF,MAAM,IAEF,YAATH,EAETT,EAAWd,OAAOnE,GACA,QAAT0F,EAETP,EAAUhB,OAAOnE,GACC,WAAT0F,EAMTV,EAJkChF,EAAM+F,QAAQpB,EAAAqB,QAAQC,qBAAsB,SAACC,GAE7E,MAAO,QAAQA,IAGC,aAATR,EAOTV,EAAkB,KAJgBF,EAAKqB,uBAAuBX,WAAmB,OAAExF,MAAM+F,QAAQpB,EAAAqB,QAAQC,qBAAsB,SAACC,GAE9H,MAAO,QAAQA,IAEuB,IAGxCnB,EAAMW,GAAQ1F,EAIlB,OAAO4E,EAAA7H,QAAS+H,EAAKsB,QAAS,CAC5BrB,MAAKA,EACLnG,OAAMA,EACNoG,gBAAeA,EACfC,SAAQA,EACRC,UAASA,EACTC,QAAOA,EACPC,SAAQA,yICrECzJ,EAAAmD,kBAA8B,CACzC,QACA,SACA,SACA,QACA,QACA,OACA,eACA,SACA,SACA,UACA,QACA,OACA,iBACA,eACA,qBACA,kBACA,mBACA,gBACA,gBACA,QACA,SACA,SACA,SACA,MACA,OACA,QACA,UACA,WACA,QACA,aACA,YACA,YACA,YACA,UACA,WACA,QACA,WACA,cACA,QACA,aACA,WACA,SACA,YACA,OACA,UACA,YACA,WACA,YACA,OACA,iBACA,iBACA,aACA,UACA,iBACA,QACA,UACA,UACA,UACA,OACA,UACA,QACA,UACA,UACA,SACA,aACA,aACA,eACA,WACA,sGCrEWnD,EAAAqF,SAAsC,CACjDqF,UAAa,EACbC,OAAU,GACVC,KAAQ,GACRC,MAAS,GACTC,KAAQ,GACRC,MAAS,GACTC,MAAS,GACTC,IAAO,EACPC,GAAM,GACNC,IAAO,0CCXT,IAAiBd,oDAAAA,EAAArK,EAAAqK,UAAArK,EAAAqK,QAAO,KAUTe,cAAwB,YAaxBf,EAAAgB,oBAA8B,aAW9BhB,EAAAiB,mBAA6B,UAW7BjB,EAAAkB,2BAAqC,UAarClB,EAAAC,qBAA+B,qEAW/BD,EAAAmB,YAAsB,uEACtBnB,EAAAoB,aAAuB,+EACvBpB,EAAAqB,YAAsB,sGCtErC,IAAA1C,EAAAtJ,EAAA,kBAEaM,EAAAoG,MAAQ,SAACvC,EAAqB/D,GACzC,OAAOA,EAAKsK,QAAQpB,EAAAqB,QAAQkB,2BAA4B,SAACI,GAEvD,IAAMC,EAAuBD,EAAK3E,OAAO,EAAG2E,EAAKzL,OAAS,GAE1D,OAAI2D,EAAS+H,GAEJ,QAAQD,EAGRA,+GCXb3L,EAAAoB,QAAA,SAAiCqJ,EAAiBX,OAAC+B,EAAA/B,EAAAV,MAAAA,OAAA,IAAAyC,EAAA,GAAAA,EAAYC,EAAAhC,EAAA7G,OAAAA,OAAA,IAAA6I,EAAA,GAAAA,EAAaC,EAAAjC,EAAAT,gBAAAA,OAAA,IAAA0C,EAAA,GAAAA,EAAsBC,EAAAlC,EAAAR,SAAAA,OAAA,IAAA0C,EAAA,GAAAA,EAAeC,EAAAnC,EAAAP,UAAAA,OAAA,IAAA0C,EAAA,GAAAA,EAAgBC,EAAApC,EAAAN,QAAAA,OAAA,IAAA0C,EAAA,GAAAA,EAAcC,EAAArC,EAAAL,SAC7I,MAAO,CACLgB,QAAOA,EACPrB,MAAKA,EACLnG,OAAMA,EACNoG,gBAAeA,EACfC,SAAQA,EACRC,UAASA,EACTC,QAAOA,EACPC,cAT2I,IAAA0C,EAAA,GAAAA,2FCI/I,IAAA3L,EAAAd,EAAA,YACAuJ,EAAAvJ,EAAA,mBAsCM0M,EAAe,SAACvI,EAAqBwI,EAAkCC,GAC3E,IAAMC,EAAsB,GAC5BF,EAAazG,QAAQ,SAAC4G,EAA6BjN,GACjDgN,EAAazG,KAAK2G,EAAK5I,EAAU2I,EAAWF,EAAa/M,OAI3D,IADA,IAAMmN,EAA2B,cACtBC,GACTD,EAAkB5G,KAAK,SAACrE,GAEtB,OADAA,EAAMmL,YAAYpM,EAAAK,OAAOgD,EAAU8I,IAC5BlL,KAHoBoL,EAAA,EAAA/C,EAAAwC,EAAapC,MAAMmC,EAAanM,QAAhC2M,EAAA/C,EAAA5J,OAAA2M,IAAuC,GAA3C/C,EAAA+C,IAO3B,OAAO,SAACC,GACN,IAA6B,IAAAD,EAAA,EAAA/C,EAnDrB,SAACiD,EAAwBC,GAEnC,IADA,IAAMC,EAAS,GACN1N,EAAI,EAAGA,EAAI2N,KAAKC,IAAIJ,EAAG7M,OAAQ8M,EAAG9M,QAASX,IAClD0N,EAAOnH,KAAK,CAACiH,EAAGxN,GAAIyN,EAAGzN,KAEzB,OAAO0N,EA8CwBG,CAAIb,EAAcO,EAAQnD,YAA1BkD,EAAA/C,EAAA5J,OAAA2M,IAAuC,CAAzD,IAAAhB,EAAA/B,EAAA+C,GAAC7K,EAAA6J,EAAA,GAAOwB,EAAAxB,EAAA,QACHhE,IAAV7F,QAAiC6F,IAAVwF,GACxBrL,EAAcqL,GAInB,IAAoB,IAAAvB,EAAA,EAAAwB,EAAAZ,EAAAZ,EAAAwB,EAAApN,OAAA4L,IAAmB,EAA5B9J,EAAKsL,EAAAxB,IACRgB,GAGR,OAAOA,IAIX,SAAwBL,EAAK5I,EAAqB0J,EAA4BC,GAC5E,QAAiB3F,IAAb2F,EACF,OAAO,SAAC/L,GACNA,EAAMgM,UAKV,GAAwB,iBAAbF,GACW,iBAAbC,EACP,OAAID,IAAaC,EACR,SAAC/L,GACN,IAAMiM,EAAWlN,EAAAK,OAAOgD,EAAU2J,GAElC,OADA/L,EAAME,YAAY+L,GACXA,GAGF,SAACjM,KAIZ,GAAI8L,EAAS9C,UAAY+C,EAAS/C,QAChC,OAAO,SAAChJ,GACN,IAAMiM,EAAWlN,EAAAK,OAAOgD,EAAU2J,GAElC,OADA/L,EAAME,YAAY+L,GACXA,GAIX,GAAiC,KAA7BF,EAASnE,gBAEX,OAAO,SAAC5H,GACN,IAAMiM,EAAWlN,EAAAK,OAAOgD,EAAU2J,GAElC,OADA/L,EAAME,YAAY+L,GACXA,GAIX,GAAIF,EAASlE,WAAaiE,EAASjE,SAAU,CAE3C,IAAMqE,EAAWnN,EAAAqB,WAAWgC,EAAUoF,EAAA7H,QAASoM,EAAS/C,QAAS,CAC/DrB,WAAOvB,EAAW0B,UAAW,GAAIF,gBAAiB,GAAIpG,YAAQ4E,EAAWyB,cAAUzB,EAAW2B,QAAS,GACvGC,SAAUjJ,EAAAK,OAAOgD,EAAU2J,MAE7B,OAAO,SAAC/L,GACN,IAAK,IAAIlC,EAAIkC,EAAMmM,WAAWjE,WAAWzJ,OAAS,EAAO,EAAJX,EAAOA,IAC1DkC,EAAMmM,WAAWjE,WAAWpK,GAAGkO,SAGjC,OADAhM,EAAME,YAAYgM,GACXA,GAIX,IAAME,EA9GU,SAACC,EAAcC,GAI/B,IAHA,IAAMC,EAAiB,cAGXC,EAAGpF,GACbmF,EAAQlI,KAAK,SAACrE,GAEZ,OADAA,EAAMyM,aAAaD,EAAIpF,GAChBpH,KAHUoL,EAAA,EAAA/C,EAAA3E,OAAOiC,QAAQ2G,GAAflB,EAAA/C,EAAA5J,OAAA2M,IAAwB,CAAlC,IAAAhB,EAAA/B,EAAA+C,KAACoB,EAAApC,EAAA,GAAGA,EAAA,eAQJoC,GACHA,KAAKF,GACTC,EAAQlI,KAAK,SAACrE,GAEZ,OADAA,EAAM0M,gBAAgBF,GACfxM,IAJb,IAAK,IAAMwM,KAAKH,IAALG,GASX,OAAO,SAACxM,GACN,IAAoB,IAAAoL,EAAA,EAAAuB,EAAAJ,EAAAnB,EAAAuB,EAAAlO,OAAA2M,IAAS,EAC3B7K,EADcoM,EAAAvB,IACRpL,KAuFS4M,CAAUd,EAASnE,MAAOoE,EAASpE,OAChDkF,EAAgBlC,EAAavI,EAAU0J,EAAS9D,SAAU+D,EAAS/D,UAEzE,OAAO,SAAChI,GAKN,OAJuB,IAAnBA,EAAMmI,WACRiE,EAAWpM,GACX6M,EAAc7M,IAETA,GA7DXzB,EAAAoB,QAAAqL,2HCxEA,IAAAzD,EAAAtJ,EAAA,kBACAuJ,EAAAvJ,EAAA,mBACA6O,EAAA7O,EAAA,yBACAkE,EAAAlE,EAAA,mBAEAM,EAAAoB,QAAA,SAAwBoN,EAAQ3K,EAAqBsF,EAAwBsF,GAC3E,IAAMC,EAAWC,KAAKvI,MAAMuI,KAAKC,UAAUzF,IACrCtG,EAAOgB,EAASvB,MAElBuM,EAAsC,GA+C1C,OA7CAH,EAASjF,SAASqF,IAAI,SAAC3P,GACrB,GAAiB,iBAANA,GAAkBA,EAAEmK,SAAU,CAChC,IAAAyF,EAAA5P,EAAAsL,QAASX,EAAA3K,EAAAiK,MAAA4F,OAAA,IAAAlF,EAAA,GAAAA,EAAY+B,EAAA1M,EAAA8D,OAAAgM,OAAA,IAAApD,EAAA,GAAAA,EAAaqD,EAAA/P,EAAAkK,gBAAiBC,EAAAnK,EAAAmK,SAAU6F,EAAAhQ,EAAAoK,UAAW6F,EAAAjQ,EAAAqK,QAASsC,EAAA3M,EAAAsK,SAAA4F,OAAA,IAAAvD,EAAA,GAAAA,EAElFC,EAAAwC,EAAAnN,QAAAyC,EAAAyF,GAACgG,EAAAvD,EAAApF,QAAS4I,EAAAxD,EAAAnF,QAAS4I,EAAAzD,EAAAlF,QAAS4I,EAAA1D,EAAAtF,SAAUK,EAAAiF,EAAAjF,MAAO4I,EAAA3D,EAAAhF,KAEnDzF,QAAQC,IAAIkO,GAEZ,IAAME,EAAc1I,MAAMyC,KAAK,IAAIzC,MAAMH,GAAQ,SAAC+B,EAAG+G,SACnD,OAAO3G,EAAA7H,QAAS2N,EAAS,CACvB3F,MAAK4F,EACL/L,OAAMgM,EACN5F,gBAAe6F,EACf5F,SAAU,KACVC,UAAS4F,EACT3F,QAAS,KACTC,SAAU,CAAC+E,EAAQ3K,EAAU,CAC3B4G,QAAOsE,EAAE3F,MAAK4F,EAAE/L,OAAMgM,EAAE5F,gBAAe6F,EAAE5F,SAAU,KAAMC,UAAS4F,EAAE3F,QAAO4F,EAAE3F,SAAQ4F,IACtFvF,EAAA,GACCA,EAACwF,GAAW,YAAsB,UAATI,EAAmBD,EAASG,GAAIH,EAASG,GAAG,GACrE9F,EAACyF,GAAW,YAAsB,UAATG,EAAmB,KAAMD,EAASG,GAAG,GAC9D9F,EAAC0F,GAAW,YAAaI,WAK/Bf,EAAgB/I,KAAIiD,MAApB8F,EAAwBc,QAExB,GAAuB,oBAAnB,EAAIxI,WACN0H,EAAgB/I,KAAK0I,EAAQ3K,EAAU1E,QAClC,CACL,IAAM0Q,EAASC,EAAejM,EAAU1E,GAExC0P,EAAgB/I,KAAKO,SAAS,mGAGfwJ,EAAM,oBAElB5P,KAAK4C,EAAM4L,OAKpBC,EAASjF,SAAWoF,EAEbH,GAGT,IAAMoB,EAAiB,SAACjM,EAAqBkM,GAE3C,IAAMC,EAAyCD,EAAQE,MAAMjH,EAAAqB,QAAQgB,qBAGrE,IAAK2E,EACH,OAAOD,EAGT,IAAK,IAAIxQ,EAAI,EAAGA,EAAIyQ,EAAqB9P,OAAQX,IAE/CwQ,EAAUA,EAAQ3F,QAAQ4F,EAAqBzQ,GAAI,SAAC2Q,GAWlD,OATqBA,EAAI9F,QAAQpB,EAAAqB,QAAQC,qBAAsB,SAACC,GAC9D,YAAmC1C,IAA/BjE,EAAA8C,QAAQ7C,EAASvB,MAAOiI,GACnB,QAAQA,EAER,eAAeA,IAKNH,QAAQ,KAAM,MACdA,QAAQ,KAAM,OAItC,OAAO2F,gLCtFT,IAAAI,EAAAzQ,EAAA,wBACAkE,EAAAlE,EAAA,mBACA0Q,EAAA1Q,EAAA,yBAEaM,EAAA6B,WAAa,SAACgC,EAAqBiG,OAACW,EAAAX,EAAAW,QAASoB,EAAA/B,EAAAV,MAAAA,OAAA,IAAAyC,EAAA,GAAAA,EAAYC,EAAAhC,EAAA7G,OAAAA,OAAA,IAAA6I,EAAA,GAAAA,EAAazC,EAAAS,EAAAT,gBAAiBE,EAAAO,EAAAP,UAAWC,EAAAM,EAAAN,QAASuC,EAAAjC,EAAAL,SAAAA,OAAA,IAAAsC,EAAA,GAAAA,EAEhHsE,EAA2BC,QAAQjK,SAAS,uBAAuBgD,EAAe,KACrFpJ,KAAK4D,IAGR,GAAIwF,IAAuC,IAApBgH,EACrB,OAAO1N,SAAS4N,cAAc,KAOhC,IAHA,IAAMC,EAAM7N,SAAS8N,cAAchG,GAGdoC,EAAA,EAAAb,EAAA7G,OAAOiC,QAAQgC,GAAfyD,EAAAb,EAAA9L,OAAA2M,IAAuB,CAAjC,IAAAZ,EAAAD,EAAAa,GAACoB,EAAAhC,EAAA,GAAGpD,EAAAoD,EAAA,GACbuE,EAAItC,aAAaD,EAAGpF,GAItB,IAAqB,IAAAqD,EAAA,EAAAC,EAAAhH,OAAOiC,QAAQnE,GAAfiJ,EAAAC,EAAAjM,OAAAgM,IAAwB,CAAlC,IAAAwE,EAAAvE,EAAAD,GACHyE,GADI1C,EAAAyC,EAAA,GAAG7H,EAAA6H,EAAA,GACPP,EAAA/O,QAAAyC,EAAAoK,EAAApF,IAAC9E,EAAA4M,EAAA5M,UAAWG,EAAAyM,EAAAzM,GAAIoB,EAAAqL,EAAArL,oBACtBkL,EAAInN,iBAAiBU,EAAWG,EAAIoB,GAItC,IAAoB,IAAAsL,EAAA,EAAAvB,EAAA5F,EAAAmH,EAAAvB,EAAAnP,OAAA0Q,IAAU,CAAzB,IAAMvD,EAAKgC,EAAAuB,GACRC,EAAS7Q,EAAAa,OAAOgD,EAAUwJ,GAChCmD,EAAI5D,YAAYiE,GAGlB,GAAItH,GAAaiH,aAAeM,iBAAkB,CACzC,IAAArN,EAAA8F,EAAA9F,KAAM0G,EAAAZ,EAAAY,KAEbqG,EAAInM,MAAQT,EAAA8C,QAAQ7C,EAAUJ,GAExB,IAAAsN,EAAAX,EAAAhP,QAAAyC,EAAAJ,EAAA0G,GAACpG,EAAAgN,EAAAhN,UAAWG,EAAA6M,EAAA7M,GAClBsM,EAAInN,iBAAiBU,EAAWG,GAQlC,OALIsF,IACF3F,EAASzB,MAAMoH,GAAWgH,GAIrBA,GAGIxQ,EAAAa,OAAS,SAACgD,EAAqBmN,GAC1C,MAAqB,iBAAVA,EACFrO,SAASsO,eAAeD,GAE1BhR,EAAA6B,WAAWgC,EAAUmN","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import traverse from \"./dom/Traverse\";\nimport observe from \"./data/Observe\";\nimport { possibleEventList } from \"./etc/ElementEvents\";\nimport { renderElem } from \"./vdom/Render\";\nimport diff from \"./vdom/Diff\";\nimport hydrate from \"./vdom/Hydrate\";\n\ntype funcProp = { [key: string]: Function };\n\ninterface PolarbearParams {\n  created?: Function; // Instance created lifecycle hook\n  data?: { [key: string]: any }; // Instance data properties\n  el?: string; // App container element selector\n  events?: funcProp; // Global document events\n  filters?: funcProp; // Content interpolation filters\n  methods?: funcProp; // Instance methods\n  mounted?: Function; // Instance mounted lifecycle hook\n  watch?: funcProp; // Property watchers\n}\n\nexport default class Polarbear {\n  // Root app container selector\n  $appContainerSel: string;\n\n  // Root app container element\n  $appContainerEl: HTMLElement;\n\n  // Virtual dom\n  $masterVDom: any;\n  $currentVDom: any;\n\n  // References to document elements that are used for edge cases\n  $refs: { [key: string]: Element } = {};\n\n  // Filter functions for use with interpolation elements\n  $filters: funcProp = {};\n\n  // Data properties for instance\n  $data: { [key: string]: any } = {};\n\n  // Property watchers for calling functions on property changes\n  $watchers: { [key: string]: Function } = {};\n\n  // Allows for other instance properties to be created\n  [key: string]: any;\n\n  // TODO: remove\n  $initial: boolean = true;\n\n  $appEl: HTMLElement;\n\n  constructor(params: PolarbearParams) {\n    // Call created method if it exists\n    // Instance has just been created. Nothing else has happened yet\n    if (params.created) params.created();\n\n    // Get app container selector so that it may be continuous referenced for mounting\n    this.$appContainerSel = params.el;\n\n    // Grab root app element\n    this.$appContainerEl = document.querySelector(this.$appContainerSel);\n\n    // Traverse app DOM and copy into VDOM\n    this.$masterVDom = traverse(this.$appContainerEl);\n    this.$currentVDom = {};\n\n    // Create observables for all of the data attributes\n    observe(this, params.data);\n\n    // Migrate methods to root level of instance so that they may be easily used\n    if (params.methods) {\n      for (const method in params.methods) {\n        if (params.methods.hasOwnProperty(method)) {\n          // Remap created methods to root level\n          this[method] = params.methods[method];\n        }\n      }\n    }\n\n    // Initialize all document level events if they exist\n    if (params.events) {\n      for (const event in params.events) {\n        if (params.events.hasOwnProperty(event) && possibleEventList.includes(event)) {\n          // Add document level event callbacks for chosen events\n          // TODO: probably change this to be on the app container rather than document\n          document.addEventListener(event, (e: Event) => params.events[event](e));\n        }\n      }\n    }\n\n    // Copy over filter functions into instance\n    if (params.filters) {\n      for (const filter in params.filters) {\n        if (params.filters.hasOwnProperty(filter)) {\n          // Copy filter to the instance\n          this.$filters[filter] = params.filters[filter];\n        }\n      }\n    }\n\n\n    // Perform initial render\n    this.render();\n\n    // Initialize property watchers\n    if (params.watch) {\n      for (const prop in params.watch) {\n        if (params.watch.hasOwnProperty(prop)) {\n          // Copy the watcher's callback function to the instance\n          this.$watchers[prop] = params.watch[prop];\n        }\n      }\n    }\n\n    // Call mounted method if it exists\n    // Instance has finished generation\n    if (params.mounted) params.mounted.call(this);\n  }\n\n  render() {\n    const r1 = performance.now();\n    if (this.$initial) {\n      this.$currentVDom = hydrate(this, this.$masterVDom);\n\n      console.log(this.$currentVDom);\n\n      this.$appEl = mount(renderElem(this, this.$currentVDom), this.$appContainerEl);\n\n      this.$initial = false;\n    } else {\n      const temp = hydrate(this, this.$masterVDom);\n\n      console.log(temp);\n\n      const patch = diff(this, this.$currentVDom, temp);\n\n      this.$appEl = patch(this.$appEl);\n\n      this.$currentVDom = temp;\n    }\n\n    const r2 = performance.now();\n    console.log(`Render took ${(r2 - r1).toFixed(1)}ms`);\n  }\n}\n\nfunction mount($node: HTMLElement, $target: HTMLElement) {\n  $target.replaceWith($node);\n  return $node;\n}\n\n(window as any).Polarbear = Polarbear;\n","import Polarbear from \"../Polarbear\";\nimport { setProp } from \"../data/DataFns\";\n\nexport default function computeBinding(instance: Polarbear, prop: string, modifiers: string[]) {\n  // Decide whether to bind the value on the element's input or change event\n  let eventName: string = \"input\";\n  if (modifiers.includes(\"lazy\")) eventName = \"change\";\n\n  // Decide whether to return the element's value as a number\n  let returnAsNumber: boolean = false;\n  if (modifiers.includes(\"number\")) returnAsNumber = true;\n\n  // Decide whether to trim the element's value\n  let trimReturnValue: boolean = false;\n  if (modifiers.includes(\"trim\")) trimReturnValue = true;\n\n  // Return generated event\n  return {\n    eventName,\n    fn: (e: Event) => {\n      // Retrieve element value from event's target element\n      let elementValue: any = (e.target as HTMLInputElement).value;\n\n      // Parse value to number if the bindval has 'number' flag\n      elementValue = returnAsNumber ? isNaN(parseFloat(elementValue)) ? elementValue : parseFloat(elementValue) : elementValue;\n\n      // Trim string if the bindval has 'trim' flag\n      elementValue = trimReturnValue ? elementValue.trim() : elementValue;\n\n      // Update the property on the instance\n      setProp(instance, prop, elementValue);\n    }\n  };\n}\n","import Polarbear from \"../Polarbear\";\nimport { keyCodes } from \"../etc/KeyCodes\";\nimport { possibleEventList } from \"../etc/ElementEvents\";\nimport { parse } from \"../parser/CodeParser\";\n\nexport default function computeEvent(instance: Polarbear, event: string, callbackFn: string): any {\n  // Split raw event into its name and possible modifiers\n  const eventComponents: string[] = event.split(\".\");\n\n  const eventName: string = eventComponents[0];\n  const eventModifiers: string[] = eventComponents.splice(1);\n\n  // Check for valid event name before attempting to add it to an element\n  if (!possibleEventList.includes(eventName)) {\n    // ERROR: invalid event name\n    return;\n  }\n\n  // Get list of common keys that we want to reference by name instead of keycodes\n  const commonKeyCodeNames: string[] = Object.keys(keyCodes);\n\n  // Get the list of other event modifiers that we want to check for\n  const otherEventModifiers: { [key: string]: boolean } = {\n    \"capture\": false,\n    \"passive\": false,\n    \"prevent\": false,\n    \"once\": false\n  };\n\n  // List of conditional evaluations that will be joined together to check within the event callback\n  let conditionalChecks: (string | number)[] = [];\n\n  // Iterate over event modifiers and compute their responsibility\n  eventModifiers.forEach((em: string) => {\n    if (Object.keys(otherEventModifiers)\n              .includes(em)) {\n      // Change modifier to true if it is a present modifier\n      otherEventModifiers[em] = true;\n    } else if (commonKeyCodeNames.includes(em)) {\n      // Add the resolved key-code value to the conditional checks\n      conditionalChecks.push(`$event.keyCode === ${keyCodes[em]}`);\n    } else {\n      // Attempt to convert the modifier to a number\n      const parsedModifier: number = Number(em);\n      if (!isNaN(parsedModifier)) {\n        // If the modifier is a valid number, add it as a key-code conditional check\n        conditionalChecks.push(`$event.keyCode === ${parsedModifier}`);\n      } else {\n        // If not then just add the literal key value to a key conditional check\n        conditionalChecks.push(`$event.key === '${em}'`);\n      }\n    }\n  });\n\n  // Create a conditional string to evaluate within the function call before evaluating actual code\n  const conditionalRule: string = `if (!(${conditionalChecks.join(\"||\")})) { return; }`;\n\n  // Parse the received code into usable code for the event listener\n  const finalCode: string = parse(instance, callbackFn);\n\n  // Return generated event\n  return {\n    eventName,\n    fn: (e: Event) => {\n      // Create strict evaluated function call\n      return Function(`\n      \"use strict\";\n      const $event = arguments[0];\n      ${otherEventModifiers[\"prevent\"] ? `$event.preventDefault();` : \"\"}\n      ${conditionalChecks.length > 0 ? conditionalRule : \"\"}\n      ${finalCode}\n      `)\n        .call(instance, e);\n    },\n    otherEventModifiers\n  };\n}\n","import Polarbear from \"../Polarbear\";\nimport { getProp } from \"../data/DataFns\";\n\nexport default function computeLoop(instance: Polarbear, statement: string) {\n  const loopComponents: string[] = statement.split(/\\sin\\s/);\n\n  if (loopComponents.length > 1) {\n    const specifics = loopComponents[0].trim()\n                                       .split(\",\");\n    let iterable = getProp(instance.$data, loopComponents[1].trim());\n\n    let keyName, valName, idxName, count, type;\n\n    console.log(specifics);\n\n    if (specifics.length === 1) {\n      keyName = specifics[0].trim();\n    } else if (specifics.length === 2) {\n      keyName = specifics[0].substr(1)\n                            .trim();\n      idxName = specifics[1].substr(0, specifics[1].length - 1)\n                            .trim();\n    } else if (specifics.length === 3) {\n      keyName = specifics[0].substr(1)\n                            .trim();\n      valName = specifics[1].trim();\n      idxName = specifics[2].substr(0, specifics[2].length - 1)\n                            .trim();\n    } else {\n      // ERROR: too many vars\n    }\n\n\n    // TODO: use global type checking methods\n    // TODO: implement number iterable\n    if (Array.isArray(iterable)) {\n      type = \"array\";\n      count = iterable.length;\n    } else if ((iterable).toString() === \"[object Object]\") {\n      type = \"object\";\n      iterable = Object.entries(iterable);\n      count = Object.keys(iterable).length;\n    } else {\n      type = \"number\";\n      count = parseInt(iterable);\n    }\n\n    return {\n      keyName,\n      valName,\n      idxName,\n      iterable,\n      count,\n      type\n    };\n  } else {\n    // ERROR: invalid loop specification\n  }\n}\n","type contiguousObj = { [key: string]: any }\n\n// https://github.com/lukeed/dset\nexport const setProp = (obj: contiguousObj, keys: (string | string[]), val: any): void => {\n  (keys as string).split && (keys = (keys as string).split(\".\"));\n  let i = 0, l = keys.length, t = obj, x;\n  for (; i < l; ++i) {\n    x = t[keys[i]];\n    t = t[keys[i]] = (i === l - 1 ? val : (x != null ? x : (!!~keys[i + 1].indexOf(\".\") || !(+keys[i + 1] > -1)) ? {} : []));\n  }\n};\n\n// https://github.com/developit/dlv\nexport const getProp = (obj: contiguousObj, key: (string | string[]), def?: any, p?: number): any => {\n  p = 0;\n  key = (key as string).split ? (key as string).split(\".\") : key;\n  while (obj && p < key.length) obj = obj[key[p++]];\n  return (obj === undefined || p < key.length) ? def : obj;\n};\n","import Polarbear from \"../Polarbear\";\nimport { getProp, setProp } from \"./DataFns\";\n\nexport default function observe(instance: Polarbear, obj: { [key: string]: any }, parent?: string): void {\n  for (const prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      // Remap property path if it is a nested property\n      const propPath = parent ? `${parent}.${prop}` : prop;\n\n      // Retrieve property value from its original object\n      const propertyVal = getProp(obj, prop);\n\n      // Get the literal type of the retrieved property\n      const valueType = propertyVal.constructor;\n\n      if (valueType === Object) {\n        // Set property to be empty object since its children will need to be separately observed\n        setProp(instance.$data, propPath, {});\n        setProp(instance, propPath, {});\n\n        // Observe child properties of object\n        observe(instance, propertyVal, propPath);\n      } else if (valueType === Array) {\n        // Store reference array in instance data property\n        setProp(instance.$data, propPath, propertyVal);\n\n        // TODO: update list components if arrays are updated\n\n        const arrProxy = new Proxy(getProp(instance.$data, propPath), {\n          // Proxy trap for value deletion\n          deleteProperty(target: any, property: any): boolean {\n            console.log(`deleting ${String(property)} from ${target}`);\n            return true;\n          },\n          // Proxy trap for updating or adding values\n          set(target: any, property: any, value: any): boolean {\n            target[property] = value;\n            console.log(`${target} ${value} ${String(property)}`);\n            return true;\n          }\n        });\n\n        // Set array proxy to actual root property so that proxy traps are triggered on property reference\n        setProp(instance, propPath, arrProxy);\n      } else {\n        // Store reference property on instance data property\n        setProp(instance.$data, propPath, propertyVal);\n\n        // Set property on root of instance or on child object of instance root\n        const definitionLocation = parent ? getProp(instance, parent) : instance;\n\n        // Define property getters and setters on instance\n        Object.defineProperty(definitionLocation, prop, {\n          get(): any {\n            // Retrieve value from alternative reference so that there is not an infinite loop\n            return getProp(instance.$data, propPath);\n          },\n          set(v: any): void {\n            // Get the property's previous value before reassigning it\n            const oldVal = getProp(instance.$data, propPath);\n            // Set alternative reference so that there is not an infinite loop\n            setProp(instance.$data, propPath, v);\n            // Now that the value has been updated we want to call the watcher if it exists\n            if (instance.$watchers[propPath]) {\n              // Pass through the instance reference and the property's old value and new value\n              instance.$watchers[propPath].apply(instance, [oldVal, v]);\n            }\n            // Update conditionally rendered elements based on property changes\n            // TODO\n            // Call render functions for all components that use the updated property\n            // TODO\n            instance.render();\n          }\n        });\n      }\n    }\n  }\n};\n","import { Regexes } from \"../etc/Regexes\";\nimport createEl from \"../vdom/CreateElement\";\nimport { strObj, vNode } from \"../globals\";\n\nexport default function traverse(node: HTMLElement) {\n  let attrs: strObj = {};\n  let events: strObj = {};\n  let conditionalCase: string = \"\";\n  let loopCase: string = \"\";\n  let boundData: { [key: string]: any } = {};\n  let refName: string = \"\";\n  let children: vNode[] = [];\n\n  Array.from(node.childNodes)\n       .forEach((e: HTMLElement) => {\n         if (e.nodeType === 1) {\n           children.push((traverse(e) as vNode));\n         } else {\n           children.push((e as any).data);\n         }\n       });\n\n  for (let i = 0; i < node.attributes.length; i++) {\n    const {name, value} = node.attributes[i];\n\n    if (name.startsWith(\"@\")) {\n      // Process event attributes\n      const ev = name.slice(1);\n      events[ev] = value;\n    } else if (name.startsWith(\"bindval\")) {\n      // Process value binding attribute\n      const specs = name.split(\".\");\n      boundData = {\n        prop: value,\n        opts: specs.slice(1)\n      };\n    } else if (name === \"loopfor\") {\n      // Process loop attribute\n      loopCase = String(value);\n    } else if (name === \"ref\") {\n      // Process reference attribute\n      refName = String(value);\n    } else if (name === \"showif\") {\n      // Process conditional if attribute\n      const computedCondition: string = value.replace(Regexes.interpolationContent, (s: string) => {\n        // TODO: check for actual property vs built-ins using getter\n        return `this.${s}`;\n      });\n      conditionalCase = computedCondition;\n    } else if (name === \"showelse\") {\n      // Process conditional else attribute\n      // @ts-ignore\n      const computedCondition: string = node.previousElementSibling.attributes[\"showif\"].value.replace(Regexes.interpolationContent, (s: string) => {\n        // TODO: check for actual property vs built-ins using getter\n        return `this.${s}`;\n      });\n      conditionalCase = `!(${computedCondition})`;\n    } else {\n      // Found no matching attributes related to Polarbear\n      attrs[name] = value;\n    }\n  }\n\n  return createEl(node.tagName, {\n    attrs,\n    events,\n    conditionalCase,\n    loopCase,\n    boundData,\n    refName,\n    children\n  });\n};\n","// https://developer.mozilla.org/en-US/docs/Web/Events\nexport const possibleEventList: string[] = [\n  \"input\",\n  \"change\",\n  \"cached\",\n  \"error\",\n  \"abort\",\n  \"load\",\n  \"beforeunload\",\n  \"unload\",\n  \"online\",\n  \"offline\",\n  \"focus\",\n  \"blur\",\n  \"animationstart\",\n  \"animationend\",\n  \"animationiteration\",\n  \"transitionstart\",\n  \"transitioncancel\",\n  \"transitionend\",\n  \"transitionrun\",\n  \"reset\",\n  \"submit\",\n  \"resize\",\n  \"scroll\",\n  \"cut\",\n  \"copy\",\n  \"paste\",\n  \"keydown\",\n  \"keypress\",\n  \"keyup\",\n  \"mouseenter\",\n  \"mouseover\",\n  \"mousemove\",\n  \"mousedown\",\n  \"mouseup\",\n  \"auxclick\",\n  \"click\",\n  \"dblclick\",\n  \"contextmenu\",\n  \"wheel\",\n  \"mouseleave\",\n  \"mouseout\",\n  \"select\",\n  \"dragstart\",\n  \"drag\",\n  \"dragend\",\n  \"dragenter\",\n  \"dragover\",\n  \"dragleave\",\n  \"drop\",\n  \"durationchange\",\n  \"loadedmetadata\",\n  \"loadeddata\",\n  \"canplay\",\n  \"canplaythrough\",\n  \"ended\",\n  \"emptied\",\n  \"stalled\",\n  \"suspend\",\n  \"play\",\n  \"playing\",\n  \"pause\",\n  \"waiting\",\n  \"seeking\",\n  \"seeked\",\n  \"ratechange\",\n  \"timeupdate\",\n  \"volumechange\",\n  \"complete\",\n  \"audioprocess\"\n];","// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\nexport const keyCodes: { [key: string]: number } = {\n  \"backspace\": 8,\n  \"delete\": 46,\n  \"down\": 40,\n  \"enter\": 13,\n  \"left\": 37,\n  \"right\": 39,\n  \"space\": 32,\n  \"tab\": 9,\n  \"up\": 38,\n  \"esc\": 27\n};","export namespace Regexes {\n  /*\n   * Matches interpolation content (mustache syntax)\n   *\n   * Input:\n   * `Some content with interpolation content... {{age + 10}}. Some other content {{favColor}}`\n   *\n   * Match:\n   * {{age + 10}}\n   */\n  export const interpolation: RegExp = /({{.*?}})/;\n\n  /*\n   * Matches all mustache syntax interpolation within a string\n   * rather than the first occurrence found\n   *\n   * Input:\n   * `Team 1 score: {{score1}}. Team 2 score: {{score2}}.`\n   *\n   * Matches:\n   * {{score1}}\n   * {{score2}}\n   */\n  export const globalInterpolation: RegExp = /({{.*?}})/g;\n\n  /*\n   * Matches first found property or function inside interpolation matches\n   *\n   * Input:\n   * `{{sayHello() + name}}`\n   *\n   * Match:\n   * sayHello\n   */\n  export const innerInterpolation: RegExp = /[\\w\\.]+/;\n\n  /*\n   * Matches only functions in inside interpolation matches\n   *\n   * Input:\n   * `{{sayHello() + name}}`\n   *\n   * Match:\n   * sayHello()\n   */\n  export const innerFunctionInterpolation: RegExp = /\\w+\\(\\)/;\n\n  /*\n   * Matches function calls inside interpolation matches\n   *\n   * Input:\n   * `console.log(name + ' is cool. Their age is: ' + age)`\n   *\n   * Matches:\n   * console.log\n   * name\n   * age\n   */\n  export const interpolationContent: RegExp = /[A-z]+((\\.\\w+)+)?(?=([^'\\\\]*(\\\\.|'([^'\\\\]*\\\\.)*[^'\\\\]*'))*[^']*$)/g;\n\n  /*\n   * Matches filters in interpolation matches\n   *\n   * Input:\n   * `{{sayHello() + name | upper | reverse}}`\n   *\n   * Matches:\n   * | upper | reverse\n   */\n  export const filterMatch: RegExp = /(\\|)(\\s+)?\\w+(.*)?\\b(?=([^'\\\\]*(\\\\.|'([^'\\\\]*\\\\.)*[^'\\\\]*'))*[^']*$)/;\n  export const filter2Match: RegExp = /(\\|)(\\s+)?\\w+(\\.\\w+)?(.*)?\\b(?=([^'\\\\]*(\\\\.|'([^'\\\\]*\\\\.)*[^'\\\\]*'))*[^']*$)/;\n  export const filterNames: RegExp = /\\w+(\\.\\w+)?/g;\n\n  // export const funcParseReg: RegExp = /([$\\w.]+?(?=\\())(?=([^'\\\\]*(\\\\.|'([^'\\\\]*\\\\.)*[^'\\\\]*'))*[^']*$)/g;\n  // export const propParseReg: RegExp = /\\w+(?=([^'\\\\]*(\\\\.|'([^'\\\\]*\\\\.)*[^'\\\\]*'))*[^']*$)/g;\n}","import Polarbear from \"../Polarbear\";\nimport { Regexes } from \"../etc/Regexes\";\n\nexport const parse = (instance: Polarbear, code: string): string => {\n  return code.replace(Regexes.innerFunctionInterpolation, (func): string => {\n    // Strip parenthesis from function name to check if the function is in the instance\n    const functionName: string = func.substr(0, func.length - 2);\n\n    if (instance[functionName]) {\n      // Return usable function call if function exists in instance\n      return `this.${func}`;\n    } else {\n      // Return original function call if function is not related to instance\n      return func;\n    }\n  });\n};\n","import { vNodeOpts } from \"../globals\";\n\nexport default function createEl(tagName: string, {attrs = {}, events = {}, conditionalCase = \"\", loopCase = \"\", boundData = {}, refName = \"\", children = []}: vNodeOpts) {\n  return {\n    tagName,\n    attrs,\n    events,\n    conditionalCase,\n    loopCase,\n    boundData,\n    refName,\n    children\n  };\n}\n","/*\n * Code adapted from: https://github.com/ycmjason-talks/2018-11-21-manc-web-meetup-4\n * */\n\nimport Polarbear from \"../Polarbear\";\nimport { vNode } from \"../globals\";\nimport { render, renderElem } from \"./Render\";\nimport createEl from \"./CreateElement\";\n\nconst zip = (xs: (vNode | string)[], ys: ((vNode | string)[] | NodeListOf<ChildNode>)) => {\n  const zipped = [];\n  for (let i = 0; i < Math.max(xs.length, ys.length); i++) {\n    zipped.push([xs[i], ys[i]]);\n  }\n  return zipped;\n};\n\nconst diffAttrs = (oldAttrs: {}, newAttrs: {}) => {\n  const patches: any[] = [];\n\n  // set new attributes\n  for (const [k, v] of Object.entries(newAttrs)) {\n    patches.push(($node: HTMLElement) => {\n      $node.setAttribute(k, (v as any));\n      return $node;\n    });\n  }\n\n  // remove old attributes\n  for (const k in oldAttrs) {\n    if (!(k in newAttrs)) {\n      patches.push(($node: HTMLElement) => {\n        $node.removeAttribute(k);\n        return $node;\n      });\n    }\n  }\n\n  return ($node: HTMLElement) => {\n    for (const patch of patches) {\n      patch($node);\n    }\n  };\n};\n\nconst diffChildren = (instance: Polarbear, oldVChildren: (vNode | string)[], newVChildren: (vNode | string)[]) => {\n  const childPatches: any[] = [];\n  oldVChildren.forEach((oldVChild: (vNode | string), i: number) => {\n    childPatches.push(diff(instance, oldVChild, newVChildren[i]));\n  });\n\n  const additionalPatches: any[] = [];\n  for (const additionalVChild of newVChildren.slice(oldVChildren.length)) {\n    additionalPatches.push(($node: HTMLElement) => {\n      $node.appendChild(render(instance, additionalVChild));\n      return $node;\n    });\n  }\n\n  return ($parent: HTMLElement) => {\n    for (const [patch, child] of zip(childPatches, $parent.childNodes)) {\n      if (patch !== undefined && child !== undefined) {\n        (patch as any)(child);\n      }\n    }\n\n    for (const patch of additionalPatches) {\n      patch($parent);\n    }\n\n    return $parent;\n  };\n};\n\nexport default function diff(instance: Polarbear, vOldNode: (vNode | string), vNewNode: (vNode | string)) {\n  if (vNewNode === undefined) {\n    return ($node: HTMLElement): undefined => {\n      $node.remove();\n      return undefined;\n    };\n  }\n\n  if (typeof vOldNode === \"string\" ||\n    typeof vNewNode === \"string\") {\n    if (vOldNode !== vNewNode) {\n      return ($node: HTMLElement) => {\n        const $newNode = render(instance, vNewNode);\n        $node.replaceWith($newNode);\n        return $newNode;\n      };\n    } else {\n      return ($node: HTMLElement): undefined => undefined;\n    }\n  }\n\n  if (vOldNode.tagName !== vNewNode.tagName) {\n    return ($node: HTMLElement) => {\n      const $newNode = render(instance, vNewNode);\n      $node.replaceWith($newNode);\n      return $newNode;\n    };\n  }\n\n  if (vNewNode.conditionalCase !== \"\") {\n    // TODO: compare to previous evaluation\n    return ($node: HTMLElement) => {\n      const $newNode = render(instance, vNewNode);\n      $node.replaceWith($newNode);\n      return $newNode;\n    };\n  }\n\n  if (vNewNode.loopCase !== vOldNode.loopCase) {\n    // TODO: this should probably be cleaned up\n    const $newNode = renderElem(instance, createEl(vNewNode.tagName, {\n      attrs: undefined, boundData: {}, conditionalCase: \"\", events: undefined, loopCase: undefined, refName: \"\",\n      children: render(instance, vNewNode)\n    }));\n    return ($node: HTMLElement) => {\n      for (let i = $node.parentNode.childNodes.length - 1; i > 1; i--) {\n        $node.parentNode.childNodes[i].remove();\n      }\n      $node.replaceWith($newNode);\n      return $newNode;\n    };\n  }\n\n  const patchAttrs = diffAttrs(vOldNode.attrs, vNewNode.attrs);\n  const patchChildren = diffChildren(instance, vOldNode.children, vNewNode.children);\n\n  return ($node: HTMLElement) => {\n    if ($node.nodeType === 1) {\n      patchAttrs($node);\n      patchChildren($node);\n    }\n    return $node;\n  };\n};\n","import { vNode } from \"../globals\";\nimport Polarbear from \"../Polarbear\";\nimport { Regexes } from \"../etc/Regexes\";\nimport createEl from \"./CreateElement\";\nimport computeLoop from \"../attributes/Loopfor\";\nimport { getProp } from \"../data/DataFns\";\n\nexport default function hydrate(instance: Polarbear, node: (vNode | string), extraData?: { [key: string]: any }) {\n  const nodeCopy = JSON.parse(JSON.stringify(node));\n  const data = instance.$data;\n\n  let newRootChildren: (vNode | string)[] = [];\n\n  nodeCopy.children.map((e: (vNode | string)) => {\n    if (typeof e !== \"string\" && e.loopCase) {\n      const {tagName, attrs = {}, events = {}, conditionalCase, loopCase, boundData, refName, children = []} = e;\n\n      const {keyName, valName, idxName, iterable, count, type} = computeLoop(instance, loopCase);\n\n      console.log(iterable);\n\n      const newChildren = Array.from(new Array(count), (v, j) => {\n        return createEl(tagName, {\n          attrs,\n          events,\n          conditionalCase,\n          loopCase: null,\n          boundData,\n          refName: null,\n          children: [hydrate(instance, {\n            tagName, attrs, events, conditionalCase, loopCase: null, boundData, refName, children\n          }, {\n            [keyName || '$KEYNAME']: type === \"array\" ? iterable[j]: iterable[j][0],\n            [valName || '$VALNAME']: type === \"array\" ? null: iterable[j][1],\n            [idxName || '$IDXNAME']: j\n          })]\n        });\n      });\n\n      newRootChildren.push(...newChildren);\n    } else {\n      if ((e).toString() === \"[object Object]\") {\n        newRootChildren.push(hydrate(instance, e as vNode));\n      } else {\n        const parsed = computeContent(instance, e as string);\n\n        newRootChildren.push(Function(`\n            \"use strict\";\n            const $EXTRA_DATA = arguments[0];\n            return \\`${parsed}\\`;\n            `)\n          .call(data, extraData));\n      }\n    }\n  });\n\n  nodeCopy.children = newRootChildren;\n\n  return nodeCopy;\n}\n\nconst computeContent = (instance: Polarbear, content: string) => {\n  // Attempt to find interpolation calls within an elements text content\n  const interpolationMatches: RegExpMatchArray = content.match(Regexes.globalInterpolation);\n\n  // If there is no interpolation calls then just break out\n  if (!interpolationMatches) {\n    return content;\n  }\n\n  for (let i = 0; i < interpolationMatches.length; i++) {\n    // Replace every interpolation call with its computed evaluation\n    content = content.replace(interpolationMatches[i], (cur: string) => {\n      // Replace each property or function call within the interpolation with a reference to the instance\n      const innerContent = cur.replace(Regexes.interpolationContent, (s: string) => {\n        if (getProp(instance.$data, s) !== undefined) {\n          return `this.${s}`;\n        } else {\n          return `$EXTRA_DATA.${s}`;\n        }\n      });\n\n      // TODO: fix this nonsense\n      return innerContent.replace(\"{{\", \"${\")\n                         .replace(\"}}\", \"}\");\n    });\n  }\n\n  return content;\n};\n","import Polarbear from \"../Polarbear\";\nimport { vNode } from \"../globals\";\nimport computeEvent from \"../attributes/Events\";\nimport { getProp } from \"../data/DataFns\";\nimport computeBinding from \"../attributes/Bindval\";\n\nexport const renderElem = (instance: Polarbear, {tagName, attrs = {}, events = {}, conditionalCase, boundData, refName, children = []}: vNode): any => {\n  // Evaluate conditional statement for the element\n  const conditionalEval: boolean = Boolean(Function(`\"use strict\";return ${conditionalCase};`)\n    .call(instance));\n\n  // Create a comment element if the conditional statement is false\n  if (conditionalCase && conditionalEval === false) {\n    return document.createComment(\" \");\n  }\n\n  // Create a base element with specified tag type\n  const $el = document.createElement(tagName);\n\n  // Add element attributes\n  for (const [k, v] of Object.entries(attrs)) {\n    $el.setAttribute(k, v);\n  }\n\n  // Add element events\n  for (const [k, v] of Object.entries(events)) {\n    const {eventName, fn, otherEventModifiers} = computeEvent(instance, k, v);\n    $el.addEventListener(eventName, fn, otherEventModifiers);\n  }\n\n  // Render and append element children\n  for (const child of children) {\n    const $child = render(instance, child);\n    $el.appendChild($child);\n  }\n\n  if (boundData && $el instanceof HTMLInputElement) {\n    const {prop, opts} = boundData;\n\n    $el.value = getProp(instance, prop);\n\n    const {eventName, fn} = computeBinding(instance, prop, opts);\n    $el.addEventListener(eventName, fn);\n  }\n\n  if (refName) {\n    instance.$refs[refName] = $el;\n  }\n\n  // Return the created element\n  return $el;\n};\n\nexport const render = (instance: Polarbear, vNode: vNode | string): any => {\n  if (typeof vNode === \"string\") {\n    return document.createTextNode(vNode);\n  }\n  return renderElem(instance, vNode);\n};\n"]}